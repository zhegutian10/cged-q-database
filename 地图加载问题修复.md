# åœ°å›¾è½¨è¿¹å›¾åŠ è½½å¤±è´¥ - é—®é¢˜è¯Šæ–­ä¸ä¿®å¤

## ğŸ” é—®é¢˜è¯Šæ–­

### å¯èƒ½çš„åŸå› 

1. **HTTPSæ··åˆå†…å®¹é—®é¢˜**ï¼ˆæœ€å¸¸è§ï¼‰
   - GitHub Pageså¼ºåˆ¶ä½¿ç”¨HTTPS
   - åœ°å›¾æ•°æ®æºå¦‚æœæ˜¯HTTPä¼šè¢«æµè§ˆå™¨é˜»æ­¢
   - æµè§ˆå™¨æ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š`Mixed Content` é”™è¯¯

2. **è·¨åŸŸé—®é¢˜ï¼ˆCORSï¼‰**
   - åœ°å›¾æ•°æ®APIä¸å…è®¸è·¨åŸŸè®¿é—®
   - æµè§ˆå™¨æ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š`CORS policy` é”™è¯¯

3. **ç½‘ç»œè¿æ¥é—®é¢˜**
   - é˜¿é‡Œäº‘DataVæœåŠ¡æš‚æ—¶ä¸å¯ç”¨
   - ç½‘ç»œå»¶è¿Ÿå¯¼è‡´è¶…æ—¶

4. **åœ°å›¾æ•°æ®æœªåŠ è½½å®Œæˆ**
   - é¡µé¢åŠ è½½å¤ªå¿«ï¼Œåœ°å›¾æ•°æ®è¿˜æœªä¸‹è½½å®Œæˆ
   - åˆ‡æ¢åˆ°åœ°å›¾æ ‡ç­¾é¡µæ—¶åœ°å›¾è¿˜æœªæ³¨å†Œ

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆæ¨èç¬¬ä¸€æ­¥ï¼‰

1. æ‰“å¼€æ‚¨çš„GitHub Pagesç½‘ç«™
2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ° `Console` æ ‡ç­¾é¡µ
4. æœç´¢å®˜å‘˜å¹¶æŸ¥çœ‹åœ°å›¾æ ‡ç­¾é¡µ
5. æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

**å¸¸è§é”™è¯¯ä¿¡æ¯ï¼š**
- `Mixed Content: The page was loaded over HTTPS, but requested an insecure resource`
  â†’ è¿™æ˜¯HTTPSæ··åˆå†…å®¹é—®é¢˜
- `Access to fetch at ... has been blocked by CORS policy`
  â†’ è¿™æ˜¯è·¨åŸŸé—®é¢˜
- `Failed to load resource: net::ERR_CONNECTION_TIMED_OUT`
  â†’ è¿™æ˜¯ç½‘ç»œè¿æ¥é—®é¢˜

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨æœ¬åœ°åœ°å›¾æ•°æ®ï¼ˆæœ€å¯é ï¼‰

ä¸‹è½½åœ°å›¾æ•°æ®åˆ°æœ¬åœ°ï¼Œé¿å…ä¾èµ–å¤–éƒ¨APIï¼š

#### æ­¥éª¤1ï¼šä¸‹è½½ä¸­å›½åœ°å›¾GeoJSON

è®¿é—®ä»¥ä¸‹ä»»ä¸€é“¾æ¥ä¸‹è½½ï¼š
- https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json
- https://github.com/apache/echarts/blob/master/test/data/map/json/china.json

å°†ä¸‹è½½çš„æ–‡ä»¶ä¿å­˜ä¸º `china.json`ï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ã€‚

#### æ­¥éª¤2ï¼šä¿®æ”¹index.html

æ‰¾åˆ°ç¬¬10-44è¡Œçš„åœ°å›¾åŠ è½½ä»£ç ï¼Œæ›¿æ¢ä¸ºï¼š

```html
<script>
    // æ³¨å†Œä¸­å›½åœ°å›¾æ•°æ® - ä½¿ç”¨æœ¬åœ°æ–‡ä»¶
    let chinaMapLoaded = false;
    
    async function loadChinaMap() {
        try {
            console.log('åŠ è½½æœ¬åœ°åœ°å›¾æ•°æ®...');
            const response = await fetch('china.json');
            if (!response.ok) {
                throw new Error(`HTTPé”™è¯¯! çŠ¶æ€: ${response.status}`);
            }
            const data = await response.json();
            echarts.registerMap('china', data);
            chinaMapLoaded = true;
            console.log('âœ… åœ°å›¾æ•°æ®åŠ è½½æˆåŠŸ');
            return true;
        } catch (err) {
            console.error('âŒ åœ°å›¾æ•°æ®åŠ è½½å¤±è´¥:', err);
            return false;
        }
    }
    
    // é¡µé¢åŠ è½½æ—¶åŠ è½½åœ°å›¾
    loadChinaMap();
</script>
```

#### æ­¥éª¤3ï¼šé‡æ–°éƒ¨ç½²

```bash
git add china.json index.html
git commit -m "æ·»åŠ æœ¬åœ°åœ°å›¾æ•°æ®"
git push
```

### æ–¹æ¡ˆ3ï¼šä½¿ç”¨jsDelivr CDNï¼ˆå¤‡é€‰ï¼‰

å¦‚æœä¸æƒ³ä¸‹è½½æœ¬åœ°æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨jsDelivr CDNï¼ˆæ”¯æŒHTTPSï¼‰ï¼š

ä¿®æ”¹ç¬¬10-44è¡Œä¸ºï¼š

```html
<script>
    // æ³¨å†Œä¸­å›½åœ°å›¾æ•°æ® - ä½¿ç”¨jsDelivr CDN
    let chinaMapLoaded = false;
    
    async function loadChinaMap() {
        const mapSources = [
            // jsDelivr CDNï¼ˆæ”¯æŒHTTPSï¼‰
            'https://cdn.jsdelivr.net/npm/echarts@5.4.3/map/json/china.json',
            // å¤‡ç”¨æº
            'https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json'
        ];
        
        for (const url of mapSources) {
            try {
                console.log('å°è¯•åŠ è½½åœ°å›¾æ•°æ®:', url);
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯! çŠ¶æ€: ${response.status}`);
                }
                const data = await response.json();
                echarts.registerMap('china', data);
                chinaMapLoaded = true;
                console.log('âœ… åœ°å›¾æ•°æ®åŠ è½½æˆåŠŸ');
                return true;
            } catch (err) {
                console.warn(`ä» ${url} åŠ è½½å¤±è´¥:`, err.message);
            }
        }
        
        console.error('âŒ æ‰€æœ‰åœ°å›¾æ•°æ®æºåŠ è½½å¤±è´¥');
        return false;
    }
    
    // é¡µé¢åŠ è½½æ—¶åŠ è½½åœ°å›¾
    loadChinaMap();
</script>
```

### æ–¹æ¡ˆ4ï¼šå¢åŠ åŠ è½½ç­‰å¾…æ—¶é—´

å¦‚æœæ˜¯åŠ è½½æ—¶åºé—®é¢˜ï¼Œä¿®æ”¹ç¬¬923-928è¡Œï¼š

```javascript
setTimeout(() => {
    drawTimeline(allRecords);
    drawMap(allRecords);
    drawRankChart(allRecords);
    drawNetworkChart(official, allData);
}, 500);  // ä»100mså¢åŠ åˆ°500ms
```

## ğŸ“Š éªŒè¯ä¿®å¤

ä¿®å¤åï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š

1. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
   - Chrome: `Ctrl + Shift + Delete`
   - é€‰æ‹©"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
   - ç‚¹å‡»"æ¸…é™¤æ•°æ®"

2. **å¼ºåˆ¶åˆ·æ–°é¡µé¢**
   - Windows: `Ctrl + F5`
   - Mac: `Cmd + Shift + R`

3. **æ£€æŸ¥æ§åˆ¶å°**
   - åº”è¯¥çœ‹åˆ°ï¼š`âœ… åœ°å›¾æ•°æ®åŠ è½½æˆåŠŸ`
   - ä¸åº”è¯¥æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯

4. **æµ‹è¯•åœ°å›¾åŠŸèƒ½**
   - æœç´¢ä¸€ä¸ªå®˜å‘˜
   - åˆ‡æ¢åˆ°"åœ°ç†è½¨è¿¹"æ ‡ç­¾é¡µ
   - åº”è¯¥èƒ½çœ‹åˆ°ä¸­å›½åœ°å›¾å’Œæ ‡è®°ç‚¹

## ğŸ”§ é«˜çº§è°ƒè¯•

### æ£€æŸ¥åœ°å›¾æ˜¯å¦æ³¨å†ŒæˆåŠŸ

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š

```javascript
// æ£€æŸ¥EChartsæ˜¯å¦åŠ è½½
console.log('EChartsç‰ˆæœ¬:', echarts.version);

// æ£€æŸ¥åœ°å›¾æ˜¯å¦æ³¨å†Œ
console.log('åœ°å›¾å·²æ³¨å†Œ:', chinaMapLoaded);

// å°è¯•è·å–åœ°å›¾æ•°æ®
console.log('åœ°å›¾æ•°æ®:', echarts.getMap('china'));
```

### æ‰‹åŠ¨è§¦å‘åœ°å›¾åŠ è½½

å¦‚æœè‡ªåŠ¨åŠ è½½å¤±è´¥ï¼Œåœ¨æ§åˆ¶å°è¿è¡Œï¼š

```javascript
loadChinaMap().then(success => {
    if (success) {
        console.log('åœ°å›¾åŠ è½½æˆåŠŸï¼Œè¯·é‡æ–°æ‰“å¼€åœ°å›¾æ ‡ç­¾é¡µ');
    } else {
        console.log('åœ°å›¾åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
    }
});
```

## ğŸ“ å½“å‰ä»£ç çŠ¶æ€

æ‚¨çš„index.htmlå·²ç»åŒ…å«äº†åœ°å›¾åŠ è½½é€»è¾‘ï¼ˆç¬¬11-43è¡Œï¼‰ï¼š

```javascript
async function loadChinaMap() {
    const mapSources = [
        'https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json',
        'https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json'
    ];
    
    for (const url of mapSources) {
        try {
            console.log('å°è¯•åŠ è½½åœ°å›¾æ•°æ®:', url);
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`HTTPé”™è¯¯! çŠ¶æ€: ${response.status}`);
            }
            const data = await response.json();
            echarts.registerMap('china', data);
            chinaMapLoaded = true;
            console.log('âœ… åœ°å›¾æ•°æ®åŠ è½½æˆåŠŸ');
            return true;
        } catch (err) {
            console.warn(`ä» ${url} åŠ è½½å¤±è´¥:`, err.message);
        }
    }
    
    console.error('âŒ æ‰€æœ‰åœ°å›¾æ•°æ®æºåŠ è½½å¤±è´¥');
    return false;
}
```

è¿™æ®µä»£ç ä¼šï¼š
1. å°è¯•ä»é˜¿é‡Œäº‘DataVåŠ è½½åœ°å›¾æ•°æ®
2. å¦‚æœç¬¬ä¸€ä¸ªæºå¤±è´¥ï¼Œå°è¯•ç¬¬äºŒä¸ªæº
3. åœ¨æ§åˆ¶å°è¾“å‡ºåŠ è½½çŠ¶æ€
4. è®¾ç½® `chinaMapLoaded` æ ‡å¿—

## ğŸ¯ æ¨èä¿®å¤æ­¥éª¤

### å¯¹äºGitHub Pageséƒ¨ç½²ï¼š

**æœ€ä½³æ–¹æ¡ˆï¼šä½¿ç”¨æœ¬åœ°åœ°å›¾æ–‡ä»¶**

1. ä¸‹è½½åœ°å›¾æ•°æ®ï¼š
   ```bash
   curl -o china.json https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json
   ```

2. ä¿®æ”¹index.htmlä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼ˆè§æ–¹æ¡ˆ2ï¼‰

3. æäº¤å¹¶æ¨é€ï¼š
   ```bash
   git add china.json index.html
   git commit -m "ä¿®å¤åœ°å›¾åŠ è½½é—®é¢˜ï¼šä½¿ç”¨æœ¬åœ°åœ°å›¾æ•°æ®"
   git push
   ```

**å¤‡é€‰æ–¹æ¡ˆï¼šä½¿ç”¨jsDelivr CDN**

å¦‚æœä¸æƒ³æ·»åŠ é¢å¤–æ–‡ä»¶ï¼Œä½¿ç”¨æ–¹æ¡ˆ3çš„ä»£ç ã€‚

## ğŸ’¡ é¢„é˜²æªæ–½

ä¸ºé¿å…ç±»ä¼¼é—®é¢˜ï¼š

1. **ä¼˜å…ˆä½¿ç”¨HTTPSèµ„æº**
   - æ‰€æœ‰å¤–éƒ¨èµ„æºéƒ½ä½¿ç”¨HTTPS
   - é¿å…æ··åˆå†…å®¹è­¦å‘Š

2. **æä¾›æœ¬åœ°å¤‡ä»½**
   - å…³é”®èµ„æºï¼ˆå¦‚åœ°å›¾æ•°æ®ï¼‰ä¿å­˜æœ¬åœ°å‰¯æœ¬
   - å‡å°‘å¯¹å¤–éƒ¨æœåŠ¡çš„ä¾èµ–

3. **æ·»åŠ é”™è¯¯å¤„ç†**
   - æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
   - æä¾›é‡è¯•æœºåˆ¶

4. **æµ‹è¯•å¤šç§ç¯å¢ƒ**
   - æœ¬åœ°æµ‹è¯•ï¼ˆHTTPï¼‰
   - éƒ¨ç½²æµ‹è¯•ï¼ˆHTTPSï¼‰
   - ä¸åŒæµè§ˆå™¨æµ‹è¯•

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼š

1. **æä¾›æ§åˆ¶å°æˆªå›¾**
   - åŒ…å«æ‰€æœ‰é”™è¯¯ä¿¡æ¯
   - åŒ…å«ç½‘ç»œè¯·æ±‚çŠ¶æ€

2. **æä¾›ç½‘ç«™URL**
   - ä¾¿äºç›´æ¥è¯Šæ–­é—®é¢˜

3. **è¯´æ˜å…·ä½“ç—‡çŠ¶**
   - åœ°å›¾å®Œå…¨ä¸æ˜¾ç¤ºï¼Ÿ
   - æ˜¾ç¤ºåŠ è½½ä¸­ï¼Ÿ
   - æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Ÿ

---

**ç¥æ‚¨é¡ºåˆ©è§£å†³é—®é¢˜ï¼** ğŸ‰